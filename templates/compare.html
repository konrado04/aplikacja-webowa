<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Porównaj projekty</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>Porównaj projekty</h1>
        {% if error %}
        <p class="error-message">{{ error }}</p>
        {% endif %}
        <form method="POST" action="{{ url_for('compare_projects') }}">
            <label for="project1">Projekt 1:</label>
            <select id="project1" name="project1" required>
                <option value="" disabled selected>Wybierz projekt</option>
                {% for symbol in projects.keys() %}
                    <option value="{{ symbol }}">{{ symbol }}</option>
                {% endfor %}
            </select>

            <label for="project2">Projekt 2:</label>
            <select id="project2" name="project2" required>
                <option value="" disabled selected>Wybierz projekt</option>
                {% for symbol in projects.keys() %}
                    <option value="{{ symbol }}">{{ symbol }}</option>
                {% endfor %}
            </select>

            <input type="submit" value="Porównaj">
        </form>
        {% if comparison %}
        <h2>Wynik porównania</h2>
        {% if differences %}
        <h3>Różnice</h3>
        <ul class="differences">
            {% for diff in differences %}
            <li>{{ diff }}</li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="no-projects">Brak różnic między projektami.</p>
        {% endif %}
        <p class="similarity">Podobieństwo: {{ similarity | round(2) }}%</p>
        <table>
            <tr>
                <th>Cecha</th>
                <th>{{ comparison.project1_symbol }} ({{ project1_name }})</th>
                <th>{{ comparison.project2_symbol }} ({{ project2_name }})</th>
            </tr>
            {% for feature, values in comparison.features.items() %}
            <tr>
                <td>{{ feature }}</td>
                <td>{{ values.project1 }}</td>
                <td>{{ values.project2 }}</td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
        <p class="no-projects">Wybierz projekty do porównania.</p>
        {% endif %}
        <div class="nav-links">
            <a href="{{ url_for('index') }}">Powrót do listy projektów</a>
        </div>
    </div>
</body>
</html>